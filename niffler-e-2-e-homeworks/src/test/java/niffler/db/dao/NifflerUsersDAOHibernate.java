package niffler.db.dao;import niffler.db.ServiceDB;import niffler.db.entity.UserEntity;import niffler.db.jpa.EmfProvider;import niffler.db.jpa.JpaTransactionManager;import java.util.UUID;public class NifflerUsersDAOHibernate extends JpaTransactionManager implements NifflerUsersDAO {    public NifflerUsersDAOHibernate() {        super(EmfProvider.INSTANCE.getEmf(ServiceDB.NIFFLER_AUTH).createEntityManager());    }    @Override    public int createUser(UserEntity user) {        user.setPassword(passwordEncoder.encode(user.getPassword()));        persist(user);        return 0;    }    @Override    public UserEntity readUser(UUID uuid) {//        return em.createQuery("SELECT u FROM UserEntity u WHERE id=:id", UserEntity.class)//                .setParameter("id", uuid)//                .getSingleResult();        return em.find(UserEntity.class, uuid);    }    @Override    public int updateUser(UserEntity user) {        merge(user);        return 1;    }    @Override    public String getUserId(String userName) {        return em.createQuery("select u from UserEntity u where username=:username", UserEntity.class)                .setParameter("username", userName)                .getSingleResult()                .getId()                .toString();    }    @Override    public int removeUser(UserEntity user) {        remove(user);        return 0;    }}